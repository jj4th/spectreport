{"version":3,"sources":["spectreport.min.js","spectreport.js"],"names":["_createClass","require","_classCallCheck","_Object$assign","_Object$getOwnPropertyNames","_getIterator","global","factory","exports","module","define","amd","spectreport","this","Stats","tests","arguments","length","undefined","pending","failures","duration","timeStart","timeStop","key","value","stats","obj","Test","test","status","err","_this","title","fullTitle","Math","round","error","forEach","fakeTest","TEST_PENDING","TEST_PASS","TEST_FAIL","Suite","suite","parent","suites","add","hasTests","push","addStats","Date","now","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","copy","fromObject","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","child","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_fs","_path","Aggregator","jsonDir","suiteTitle","results","lookupKeyPaths","fileList","files","readdirSync","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","file","join","statSync","isDirectory","listFiles","indexOf","keyPath","jsonObj","lookup","cursor","addSuite","fixTimeStats","pop","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","dir","relative","dirname","split","sep","readJsonSync","ex","Error","message","addJsonObject","addJsonFileList","fs","dot","path","defaults","outputHtml","template","__dirname","Spectreport","opts","aggregator","report","scan","tpl","readFileSync","render","writeFileSync","DefaultOptions"],"mappings":"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","file":"spectreport.min.js","sourcesContent":[null,"(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.spectreport = factory();\n}(this, function () { 'use strict';\n\n    class Stats {\n        constructor(tests = 0, pending = 0, failures = 0, duration = 0) {\n            this.tests = tests;\n            this.pending = pending;\n            this.failures = failures;\n            this.duration = duration;\n            this.timeStart = null;\n            this.timeStop = null;\n        }\n        add(stats) {\n            this.tests += stats.tests;\n            this.pending += stats.pending;\n            this.failures += stats.failures;\n        }\n        static fromObject(obj) {\n            let stats = new Stats();\n            return Object.assign(stats, obj);\n        }\n    }\n\n    class Test {\n        constructor(test, status, err) {\n            this.status = status;\n            this.title = test.title;\n            this.fullTitle = test.fullTitle();\n            this.duration = Math.round(test.duration / 10) / 100;\n            this.error = null;\n\n            if(err) {\n                this.error = {};\n                Object.getOwnPropertyNames(err).forEach(key => {\n                    this.error[key] = err[key];\n                });\n            }\n        }\n        static fromObject(obj) {\n            // Construct faux test object\n            let fakeTest = {\n                fullTitle: () => { return null; }\n            };\n\n            if(obj.error === undefined || obj.error === null) {\n                delete obj.error;\n            }\n\n            let test = new Test(fakeTest);\n            return Object.assign(test, obj);\n        }\n    }\n\n    Test.TEST_PENDING = 2;\n    Test.TEST_PASS = 1;\n    Test.TEST_FAIL = 0;\n\n    class Suite {\n        constructor(suite, parent) {\n            this.title = suite.title;\n            this.suites = [];\n            this.tests = [];\n            this.parent = parent;\n            this.stats = new Stats();\n        }\n        addStats(stats) {\n            this.stats.add(stats);\n        }\n        addSuite(suite) {\n            if (!suite.hasTests()) {\n                return false;\n            }\n            this.suites.push(suite);\n            this.addStats(suite.stats);\n        }\n        addTest(test) {\n            this.tests.push(test);\n            this.stats.tests++;\n\n            if (test.status === Test.TEST_PENDING) {\n                this.stats.pending++;\n            }\n            else if (test.status === Test.TEST_FAIL) {\n                this.stats.failures++;\n            }\n        }\n        hasTests() {\n            return (this.stats.tests > 0);\n        }\n        start(timeStart) {\n            this.stats.timeStart = timeStart || Date.now();\n        }\n        stop(timeStop, duration) {\n            if(!duration && !this.stats.timeStart > 0) {\n                return false;\n            }\n            this.stats.timeStop = timeStop || Date.now();\n            this.stats.duration = duration || Math.round((this.stats.timeStop - this.stats.timeStart) / 10) / 100;\n        }\n        fixTimeStats() {\n            for (let suite of this.suites) {\n                if (this.stats.timeStart === null || this.stats.timeStart > suite.stats.timeStart) {\n                    this.stats.timeStart = suite.stats.timeStart;\n                }\n                if (this.stats.timeStop === null || this.stats.timeStop < suite.stats.timeStop) {\n                    this.stats.timeStop = suite.stats.timeStop;\n                }\n                this.stats.duration = Math.round((this.stats.timeStop - this.stats.timeStart) / 10) / 100;\n            }\n        }\n        toJSON() {\n            // Generate a clean, shallow copy without the parent\n            let copy = {\n                title: this.title,\n                suites: this.suites,\n                tests: this.tests,\n                stats: this.stats\n            };\n\n            return copy;\n        }\n        static fromObject(obj, parent) {\n\n            let suite = new Suite(obj, parent);\n            let suites = [];\n            let tests = [];\n            let stats = null;\n\n            stats = Stats.fromObject(obj.stats);\n            Object.assign(suite, {stats: stats});\n\n            for (let child of obj.suites) {\n                suites.push(Suite.fromObject(child, suite));\n            }\n            Object.assign(suite, {suites: suites});\n\n            for (let test of obj.tests) {\n                tests.push(Test.fromObject(test));\n            }\n            Object.assign(suite, {tests: tests});\n\n            return suite;\n        }\n    }\n\n    const _fs = require('fs-extra');\n    const _path = require('path');\n\n    class Aggregator {\n        constructor(jsonDir, suiteTitle) {\n            this.jsonDir = jsonDir;\n            this.results = new Suite({title: suiteTitle});\n            this.lookupKeyPaths = {};\n        }\n\n        // List all files in a directory in Node.js recursively in a synchronous fashion\n        listFiles(jsonDir, fileList) {\n            jsonDir = jsonDir || this.jsonDir;\n            fileList = fileList || [];\n\n            let files = _fs.readdirSync(jsonDir);\n\n            for(let file of files) {\n                file = _path.join(jsonDir, file);\n                if (_fs.statSync(file).isDirectory()) {\n                    fileList = this.listFiles(file, fileList);\n                } else if (file.indexOf('.json') > 0) {\n                    fileList.push(file);\n                }\n            }\n\n            return fileList;\n        }\n\n        addJsonObject(keyPath, jsonObj) {\n            let lookup = this.lookupKeyPaths,\n                suite = Suite.fromObject(jsonObj),\n                cursor = suite,\n                parent;\n\n            while (keyPath.length) {\n                parent = lookup[keyPath.join('|')];\n\n                if (!parent) {\n                    let key = keyPath[keyPath.length - 1];\n                    parent = new Suite({title: key});\n                    lookup[keyPath.join('|')] = parent;\n                }\n\n                if (cursor.parent !== parent) {\n                    cursor.parent = parent;\n                    parent.addSuite(cursor);\n                } else {\n                    parent.addStats(suite.stats);\n                }\n\n                parent.fixTimeStats();\n                cursor = parent;\n                keyPath.pop();\n            }\n\n            parent = this.results;\n            if (cursor.parent !== parent) {\n                cursor.parent = parent;\n                parent.addSuite(cursor);\n            } else {\n                parent.addStats(suite.stats);\n            }\n            parent.fixTimeStats();\n        }\n\n        addJsonFileList(fileList) {\n            for (let file of fileList) {\n                let dir = _path.relative(this.jsonDir, _path.dirname(file));\n                let keyPath = dir.split(_path.sep);\n                let jsonObj = null;\n\n                try {\n                    jsonObj = _fs.readJsonSync(file);\n                } catch (ex) {\n                    throw new Error('There was a problem reading a results file: ' + file + '.\\n' + ex.message);\n                }\n\n                this.addJsonObject(keyPath, jsonObj);\n            }\n        }\n\n        scan() {\n            let fileList = null;\n\n            try {\n                fileList = this.listFiles();\n            } catch (ex) {\n                throw new Error('There was a problem reading the results directory.\\n' + ex.message);\n            }\n\n            this.addJsonFileList(fileList);\n            return this.results;\n        }\n    }\n\n    const fs = require('fs-extra');\n    const dot = require('dot');\n    const path = require('path');\n\n    const defaults = {\n        outputHtml: 'test/results/index.html',\n        jsonDir: 'test/results',\n        template: path.join(path.relative('.', __dirname), 'assets/results.dot'),\n        suiteTitle: 'Test Results'\n    };\n\n    class Spectreport {\n        constructor(opts) {\n            this.opts = Object.assign({}, defaults, opts);\n            this.aggregator = new Aggregator(this.opts.jsonDir, this.opts.suiteTitle);\n        }\n\n        report() {\n            let report = null,\n                results = this.aggregator.scan();\n\n            if (!results || !results.stats) {\n                throw new Error('No results were found.  Did you run the tests?');\n            }\n\n            try {\n                let tpl = fs.readFileSync(this.opts.template);\n                let render = dot.template(tpl);\n                report = render(results);\n            } catch (ex) {\n                throw new Error('There was a problem rendering the HTML report.\\n' + ex.message);\n            }\n\n            return report;\n        }\n\n        reportFile(outputHtml) {\n            let report = this.report();\n\n            outputHtml = outputHtml || this.opts.outputHtml;\n\n            try {\n                fs.writeFileSync(outputHtml, report);\n            } catch (ex) {\n                throw new Error('There was a problem outputting the HTML report to disk.\\n' + ex.message);\n            }\n\n            return true;\n        }\n\n        summary() {\n            if (!this.results || !this.results.stats) {\n                throw new Error('No results were found.  Did you run \\'report()\\'?');\n            }\n\n            return this.results.stats;\n        }\n    }\n\n    Spectreport.Stats = Stats;\n    Spectreport.Suite = Suite;\n    Spectreport.Test = Test;\n    Spectreport.DefaultOptions = defaults;\n\n    return Spectreport;\n\n}));"],"sourceRoot":"/source/"}